<p id="notice"><%= notice %></p>

<h1><%= @subject.name %></h1>
<%= link_to "New", new_subject_entry_item_line_path(@subject) %>
<table>
  <thead>
    <tr>
      <th>日付</th>
      <th>用途</th>
      <th>相手科目</th>
      <%if @subject.subject_type == "流動資産"%>
          <th>入金</th>
          <th>出金</th>
      <%elsif @subject.subject_type == "支出"%>
          <th>費用</th>
          <th>割引</th>
      <%elsif @subject.subject_type == "収入"%>
          <th>割引</th>
          <th>収入</th>
      <%else%>
          <% raise "wrong subject type"%>
      <%end%>
      <th colspan="2"></th>
    </tr>
  </thead>

  <tbody>
    <% @entry_item_lines.each do |line| %>
      <tr>
        <td><%= line.entry_item.entry_date %></td>
        <td><%= line.entry_item.explanation %></td>
        <td><%= line.subject.name %></td>

        <%if @subject.subject_type == "流動資産" or @subject.subject_type == "支出"%>
          <%if line.direction == '借' %>
              <td>0</td>
              <td><%= number_to_currency(line.amount, :locale => 'jp') %></td>           
          <%else%>
              <td><%= number_to_currency(line.amount, :locale => 'jp') %></td>
              <td>0</td>
          <%end%>
        <%elsif @subject.subject_type == "収入" or @subject.subject_type == "開始残高"%>
          <%if line.direction == '借' %>
              <td><%= number_to_currency(line.amount, :locale => 'jp') %></td>
              <td>0</td>
          <%else%>
             <td>0</td>
              <td><%= number_to_currency(line.amount, :locale => 'jp') %></td>
          <%end%>
        <%else%>
            <% raise "wrong subject type"%>
        <%end%> 

        <td><%= link_to "Edit", edit_subject_entry_item_line_path(line,:subject_id=>@subject) %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to '総勘定一覧', subjects_path() %>






